#!/bin/bash

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð»Ð¾Ð³Ð¾Ð² Ð² Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾Ð¼ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ Ð´Ð»Ñ Ð¿Ð¾Ð¸ÑÐºÐ° Ð¾ÑˆÐ¸Ð±Ð¾Ðº
# Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ: bash watch-logs.sh

echo "ðŸ” ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð»Ð¾Ð³Ð¾Ð² (Ctrl+C Ð´Ð»Ñ Ð²Ñ‹Ñ…Ð¾Ð´Ð°)..."
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

# Ð•ÑÐ»Ð¸ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½Ð¾ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾ Ñ pm2
if command -v pm2 &> /dev/null; then
  echo "ðŸ“‹ PM2 ÑÑ‚Ð°Ñ‚ÑƒÑ:"
  pm2 list
  echo ""
  echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
  echo "ðŸ“Š Ð›Ð¾Ð³Ð¸ Ð² Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾Ð¼ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸:"
  echo ""
  pm2 logs --lines 50
else
  # ÐÐ° ÑÐµÑ€Ð²ÐµÑ€Ðµ
  echo "ðŸ–¥ï¸  Ð§Ð¸Ñ‚Ð°ÑŽ Ð»Ð¾Ð³Ð¸ Ñ ÑÐµÑ€Ð²ÐµÑ€Ð°..."
  echo ""
  tail -f /var/www/sviydlyasvoih/platform-svoi/logs/out.log /var/www/sviydlyasvoih/platform-svoi/logs/error.log 2>/dev/null
fi
