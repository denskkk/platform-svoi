# ‚ú® –ó–ú–Ü–ù–ò –°–ò–°–¢–ï–ú–ò –†–ï–Ñ–°–¢–†–ê–¶–Ü–á –¢–ê –ú–û–ù–ï–¢–ò–ó–ê–¶–Ü–á

## üéØ –û—Å–Ω–æ–≤–Ω–∞ —ñ–¥–µ—è
**–ê–Ω–∫–µ—Ç–∏ –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω—ñ ‚Äî –ø–ª–∞—Ç–∏—Ç–µ —Ç—ñ–ª—å–∫–∏ –∑–∞ —Ñ—É–Ω–∫—Ü—ñ—ó!**

---

## üìã –©–æ –∑—Ä–æ–±–ª–µ–Ω–æ

### 1. ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–æ —Ç–∏–ø–∏ –∞–∫–∞—É–Ω—Ç—ñ–≤
**–ë—É–ª–æ 5 ‚Üí –°—Ç–∞–ª–æ 3:**
- üëÄ **–ì–ª—è–¥–∞—á (Viewer)** ‚Äî –±–∞–∑–æ–≤–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è, —Ç—ñ–ª—å–∫–∏ –ø–µ—Ä–µ–≥–ª—è–¥
- üë§ **–ó–≤–∏—á–∞–π–Ω–∏–π (Basic)** ‚Äî –ø–æ–≤–Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–∞ –∞–Ω–∫–µ—Ç–∞, –ø–ª–∞—Ç–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
- üè¢ **–ë—ñ–∑–Ω–µ—Å (Business)** ‚Äî –±—ñ–∑–Ω–µ—Å-–ø—Ä–æ—Ñ—ñ–ª—å, –ø–ª–∞—Ç–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

### 2. ‚úÖ –ü–ª–∞—Ç–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –ø–ª–∞—Ç—è—Ç—å —É—Ü–º–∫–∞–º–∏ –∑–∞:
- ü§ù –ü–æ—à—É–∫ –ø–∞—Ä–∏ ‚Äî 5 —É—Ü–º–æ–∫
- üíº –ó–∞—è–≤–∫–∞ –Ω–∞ —Ä–æ–±–æ—Ç—É ‚Äî 3 —É—Ü–º–∫–∏
- üõ†Ô∏è –ó–∞—è–≤–∫–∞ –Ω–∞ –ø–æ—Å–ª—É–≥—É ‚Äî 3 —É—Ü–º–∫–∏
- üë• –ü–æ—à—É–∫ –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫–∞ ‚Äî 4 —É—Ü–º–∫–∏
- üí∞ –ü–æ—à—É–∫ —ñ–Ω–≤–µ—Å—Ç–æ—Ä–∞ ‚Äî 5 —É—Ü–º–æ–∫
- üîç –†–æ–∑—à–∏—Ä–µ–Ω–∏–π –ø–æ—à—É–∫ ‚Äî 2 —É—Ü–º–∫–∏

### 3. ‚úÖ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞ —Å–∏—Å—Ç–µ–º–∞
- –ó–∞–ø—Ä–æ—Å–∏–≤ –¥—Ä—É–≥–∞ ‚Üí +1 —É—Ü–º–∫–∞ –≤–∞–º
- –î—Ä—É–≥ –∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞–≤—Å—è ‚Üí +1 —É—Ü–º–∫–∞ –π–æ–º—É
- –°—Ç–æ—Ä—ñ–Ω–∫–∞ `/referrals` –∑—ñ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ—é

---

## üìÅ –ù–æ–≤—ñ —Ñ–∞–π–ª–∏

### Backend
- `src/lib/ucm.ts` ‚Äî –æ–Ω–æ–≤–ª–µ–Ω–æ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏ —Ç–∞ —Ñ—É–Ω–∫—Ü—ñ—ó
- `src/app/api/paid-actions/charge/route.ts` ‚Äî —Å–ø–∏—Å–∞–Ω–Ω—è –∑–∞ –ø–ª–∞—Ç–Ω—ñ –¥—ñ—ó
- `src/app/api/paid-actions/info/route.ts` ‚Äî —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Ü—ñ–Ω–∏
- `src/app/api/referrals/stats/route.ts` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—ñ–≤

### Frontend
- `src/app/referrals/page.tsx` ‚Äî —Å—Ç–æ—Ä—ñ–Ω–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ—ó –ø—Ä–æ–≥—Ä–∞–º–∏
- `src/components/features/paid/PaidFeatureButton.tsx` ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–ª–∞—Ç–Ω–∏—Ö –¥—ñ–π

### –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö
- `prisma/schema.prisma` ‚Äî –æ–Ω–æ–≤–ª–µ–Ω–æ –º–æ–¥–µ–ª—ñ
- `database/migrations/20251118_new_registration_system.sql` ‚Äî –º—ñ–≥—Ä–∞—Ü—ñ—è –ë–î

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
- `DEPLOYMENT_NEW_SYSTEM.md` ‚Äî —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –∑ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è
- `NEW_MONETIZATION_MODEL.md` ‚Äî –æ–ø–∏—Å –Ω–æ–≤–æ—ó –º–æ–¥–µ–ª—ñ

---

## üöÄ –©–æ —Ç—Ä–µ–±–∞ –∑—Ä–æ–±–∏—Ç–∏ –Ω–∞ VPS

### –ö–æ—Ä–æ—Ç–∫—ñ –∫–æ–º–∞–Ω–¥–∏:
```bash
# 1. Backup
pg_dump -U postgres -d platform_svoi > backup_$(date +%Y%m%d).sql

# 2. –û–Ω–æ–≤–∏—Ç–∏ –∫–æ–¥
cd ~/platform-svoi && git pull

# 3. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
npm install && npx prisma generate

# 4. –ú—ñ–≥—Ä–∞—Ü—ñ—è –ë–î
psql -U postgres -d platform_svoi -f database/migrations/20251118_new_registration_system.sql

# 5. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
pm2 restart platform-svoi
```

### –î–µ—Ç–∞–ª—å–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó:
–î–∏–≤—ñ—Ç—å—Å—è —Ñ–∞–π–ª `DEPLOYMENT_NEW_SYSTEM.md`

---

## üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ—Å–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–∏–ø—ñ–≤ –∞–∫–∞—É–Ω—Ç—ñ–≤
psql -U postgres -d platform_svoi -c "SELECT account_type, COUNT(*) FROM users GROUP BY account_type;"

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ API
curl http://localhost:3000/api/paid-actions/info

# –õ–æ–≥–∏
pm2 logs platform-svoi
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

### –ù–æ–≤–∞ —Ç–∞–±–ª–∏—Ü—è: `paid_actions`
```sql
paid_action_id | user_id | action_type | amount | success | created_at
```

### –û–Ω–æ–≤–ª–µ–Ω–æ: `users`
```sql
account_type: viewer | basic | business
balance_ucm: Decimal
referral_code: String
```

### –û–Ω–æ–≤–ª–µ–Ω–æ: `referrals`
```sql
bonus_inviter: 1.00
bonus_invitee: 1.00
```

---

## üé® –ù–æ–≤—ñ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

### PaidFeatureButton
–£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∞ –∫–Ω–æ–ø–∫–∞ –¥–ª—è –ø–ª–∞—Ç–Ω–∏—Ö –¥—ñ–π:
- –ü–æ–∫–∞–∑—É—î —Ü—ñ–Ω—É
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î –±–∞–ª–∞–Ω—Å
- –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î –æ–ø–ª–∞—Ç—É
- –û–±—Ä–æ–±–ª—è—î –ø–æ–º–∏–ª–∫–∏

```tsx
<PaidFeatureButton
  actionType="partner_search"
  cost={5}
  userBalance={userBalance}
  onSuccess={(result) => console.log('Success!', result)}
  onError={(error) => alert(error)}
>
  –®—É–∫–∞—Ç–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞
</PaidFeatureButton>
```

### –°—Ç–æ—Ä—ñ–Ω–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—ñ–≤
- –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∏–π –∫–æ–¥ —Ç–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è
- –ö–Ω–æ–ø–∫–∏ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è —Ç–∞ share
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–∑–∞–ø—Ä–æ—à–µ–Ω–æ, –∑–∞—Ä–æ–±–ª–µ –Ω–æ)
- –°–ø–∏—Å–æ–∫ —Ä–µ—Ñ–µ—Ä–∞–ª—ñ–≤

---

## üîê –ë–µ–∑–ø–µ–∫–∞

### API endpoints
–í—Å—ñ –ø–ª–∞—Ç–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑–∞—Ö–∏—â–µ–Ω—ñ:
- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è —á–µ—Ä–µ–∑ JWT
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å—É
- ‚úÖ –ê—Ç–æ–º–∞—Ä–Ω—ñ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó
- ‚úÖ –õ–æ–≥—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –¥—ñ–π

### –í–∞–ª—ñ–¥–∞—Ü—ñ—è
- –¢–∏–ø–∏ –ø–ª–∞—Ç–Ω–∏—Ö –¥—ñ–π
- –°—É–º–∏ —Å–ø–∏—Å–∞–Ω–Ω—è
- –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É
- –ó–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –ø–æ–¥–≤—ñ–π–Ω–æ–º—É —Å–ø–∏—Å–∞–Ω–Ω—é

---

## üìà –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞

### –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è:
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ–π –∑–∞ —Ç–∏–ø–∞–º–∏
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–ª–∞—Ç–Ω–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π
- –°–µ—Ä–µ–¥–Ω—ñ–π –±–∞–ª–∞–Ω—Å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- –ö–æ–Ω–≤–µ—Ä—Å—ñ—è —Ä–µ—Ñ–µ—Ä–∞–ª—ñ–≤
- –ù–∞–π–ø–æ–ø—É–ª—è—Ä–Ω—ñ—à—ñ –ø–ª–∞—Ç–Ω—ñ –¥—ñ—ó

### SQL –∑–∞–ø–∏—Ç–∏:
```sql
-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–ª–∞—Ç–Ω–∏—Ö –¥—ñ–π
SELECT action_type, COUNT(*), SUM(amount) 
FROM paid_actions 
WHERE success = true 
GROUP BY action_type;

-- –¢–æ–ø —Ä–µ—Ñ–µ—Ä–∞–ª—ñ–≤
SELECT referrer_id, COUNT(*) as referrals 
FROM referrals 
GROUP BY referrer_id 
ORDER BY referrals DESC 
LIMIT 10;
```

---

## üêõ –í—ñ–¥–æ–º—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è

1. ‚ö†Ô∏è –§—É–Ω–∫—Ü—ñ—è –∫—É–ø—ñ–≤–ª—ñ —É—Ü–º–æ–∫ —â–µ –Ω–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ (—Ç—ñ–ª—å–∫–∏ —Ä–µ—Ñ–µ—Ä–∞–ª–∏)
2. ‚ö†Ô∏è –ü–æ—Ç—Ä—ñ–±–Ω–æ –æ–Ω–æ–≤–∏—Ç–∏ —ñ—Å–Ω—É—é—á—ñ —Ñ–æ—Ä–º–∏ –∑ –ø–ª–∞—Ç–Ω–∏–º–∏ –¥—ñ—è–º–∏
3. ‚ö†Ô∏è –ü–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ —Å–ø–∏—Å–∞–Ω–Ω—è/–Ω–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è

---

## üìù TODO (–º–∞–π–±—É—Ç–Ω—ñ –¥–æ—Ä–æ–±–∫–∏)

- [ ] –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è WayForPay –¥–ª—è –∫—É–ø—ñ–≤–ª—ñ —É—Ü–º–æ–∫
- [ ] Email —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ñ –±–æ–Ω—É—Å–∏
- [ ] –Ü—Å—Ç–æ—Ä—ñ—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –ø—Ä–æ—Ñ—ñ–ª—é
- [ ] –°–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –∞–∫—Ü—ñ—ó —Ç–∞ –±–æ–Ω—É—Å–∏
- [ ] –ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Ü—ñ–Ω–∞–º–∏
- [ ] –ê–Ω–∞–ª—ñ—Ç–∏—á–Ω–∞ –¥–∞—à–±–æ—Ä–¥ –¥–ª—è –≤–ª–∞—Å–Ω–∏–∫—ñ–≤ –±—ñ–∑–Ω–µ—Å—É

---

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ –ê–Ω–∫–µ—Ç–∏ –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω—ñ –¥–ª—è –≤—Å—ñ—Ö
‚úÖ –ü–ª–∞—Ç–Ω—ñ —Ç—ñ–ª—å–∫–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
‚úÖ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ –ø—Ä–∞—Ü—é—î
‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö –æ–Ω–æ–≤–ª–µ–Ω–∞
‚úÖ API endpoints –≥–æ—Ç–æ–≤—ñ
‚úÖ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Å—Ç–≤–æ—Ä–µ–Ω—ñ
‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –Ω–∞–ø–∏—Å–∞–Ω–∞

**–í—Å–µ –≥–æ—Ç–æ–≤–æ –¥–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è! üöÄ**
