# üõ°Ô∏è –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—Å—å–∫–∞ –ø–∞–Ω–µ–ª—å –°–í–Ü–ô –î–õ–Ø –°–í–û–á–•

## –û–≥–ª—è–¥

–ü–æ–≤–Ω–æ—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∞ –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ—é –∑ –¥–µ—Ç–∞–ª—å–Ω–æ—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ—é –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π —Ç–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ.

---

## üöÄ –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

### 1. Dashboard (–ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞)
**URL:** `/admin`

**–°—Ç–∞—Ç–∏—Å—Ç–∏—á–Ω—ñ –∫–∞—Ä—Ç–∫–∏:**
- üë• –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ (–≤—Å—å–æ–≥–æ + –∞–∫—Ç–∏–≤–Ω—ñ –∑–∞ 30 –¥–Ω—ñ–≤)
- üìã –ü–æ—Å–ª—É–≥–∏ (–≤—Å—å–æ–≥–æ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ñ)
- üí¨ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (–∑–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å)
- üí∞ –£–¶–ú –≤ –æ–±—ñ–≥—É (–±–∞–ª–∞–Ω—Å + —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó)

**–†–æ–∑–¥—ñ–ª–∏:**
- **–û–≥–ª—è–¥** - –∑–∞–≥–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ** - –¥–µ—Ç–∞–ª—å–Ω–∏–π —Å–ø–∏—Å–æ–∫
- **–ü–µ—Ä–µ–ø–∏—Å–∫–∏** - –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —á–∞—Ç—ñ–≤
- **–¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó** - —ñ—Å—Ç–æ—Ä—ñ—è –£–¶–ú –æ–ø–µ—Ä–∞—Ü—ñ–π

---

### 2. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ
**URL:** `/admin/users`

**–ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:**
- üîç –ü–æ—à—É–∫ –ø–æ —ñ–º–µ–Ω—ñ, email, –º—ñ—Å—Ç—É
- üìä –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –ø–æ: –¥–∞—Ç—ñ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó, –±–∞–ª–∞–Ω—Å—É –£–¶–ú, —ñ–º–µ–Ω—ñ, –º—ñ—Å—Ç—É
- üìÑ –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è (20 –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É)

**–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∫–æ–∂–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:**

**–û—Å–Ω–æ–≤–Ω—ñ –¥–∞–Ω—ñ:**
- –Ü–º'—è, –ø—Ä—ñ–∑–≤–∏—â–µ
- Email, —Ç–µ–ª–µ—Ñ–æ–Ω
- –ú—ñ—Å—Ç–æ, —Ä–µ–≥—ñ–æ–Ω
- –°—Ç–∞—Ç—É—Å–∏: Admin, Verified
- –î–∞—Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó
- –û—Å—Ç–∞–Ω–Ω—ñ–π –≤—Ö—ñ–¥

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ:**
- üí∞ –ë–∞–ª–∞–Ω—Å –£–¶–ú
- üìã –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ—Å–ª—É–≥
- üí¨ –í—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- üí∏ –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π

**–§—ñ–Ω–∞–Ω—Å–æ–≤–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- –í—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ –£–¶–ú (—á–µ—Ä–≤–æ–Ω–∏–º)
- –û—Ç—Ä–∏–º–∞–Ω–æ –£–¶–ú (–∑–µ–ª–µ–Ω–∏–º)
- –û—Å—Ç–∞–Ω–Ω—ñ 5 —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π

---

### 3. –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó
**URL:** `/admin/transactions`

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–µ—Ä—ñ–æ–¥–∞—Ö:**
- –°—å–æ–≥–æ–¥–Ω—ñ
- –ó–∞ —Ç–∏–∂–¥–µ–Ω—å
- –ó–∞ –º—ñ—Å—è—Ü—å

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–ø–∞—Ö:**
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π
- –ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞
- –°–µ—Ä–µ–¥–Ω—è —Å—É–º–∞

**–¢–æ–ø-10 –Ω–∞–π–±—ñ–ª—å—à–∏—Ö –ø–µ—Ä–µ–∫–∞–∑—ñ–≤**

**–§—ñ–ª—å—Ç—Ä–∏:**
- –í—Å—ñ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó
- –í—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω—ñ –ø–µ—Ä–µ–∫–∞–∑–∏
- –û—Ç—Ä–∏–º–∞–Ω—ñ –ø–µ—Ä–µ–∫–∞–∑–∏
- –ù–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è –∞–¥–º—ñ–Ω–æ–º
- –ë–æ–Ω—É—Å –∑–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—é
- –û–ø–ª–∞—Ç–∞ –ø–æ—Å–ª—É–≥

**–¢–∞–±–ª–∏—Ü—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π:**
| –î–∞—Ç–∞ | –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á | –¢–∏–ø | –û–ø–∏—Å | –°—É–º–∞ | –ë–∞–ª–∞–Ω—Å |
|------|------------|-----|------|------|--------|
| ... | ... | ... | ... | +/- | ... |

**–ö–æ–ª—å–æ—Ä–æ–≤–∞ —ñ–Ω–¥–∏–∫–∞—Ü—ñ—è:**
- üî¥ –í—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω—ñ - —á–µ—Ä–≤–æ–Ω–∏–π
- üü¢ –û—Ç—Ä–∏–º–∞–Ω—ñ - –∑–µ–ª–µ–Ω–∏–π
- üîµ –ê–¥–º—ñ–Ω - —Å–∏–Ω—ñ–π
- üü£ –ë–æ–Ω—É—Å - —Ñ—ñ–æ–ª–µ—Ç–æ–≤–∏–π
- üü° –û–ø–ª–∞—Ç–∞ - –∂–æ–≤—Ç–∏–π

---

### 4. –ü–µ—Ä–µ–ø–∏—Å–∫–∏ (–≤ —Ä–æ–∑—Ä–æ–±—Ü—ñ)
**URL:** `/admin/conversations`

–ü–ª–∞–Ω—É—î—Ç—å—Å—è:
- –°–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö –±–µ—Å—ñ–¥
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è—Ö
- –¢–æ–ø –Ω–∞–π–∞–∫—Ç–∏–≤–Ω—ñ—à–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

---

## üîê –ë–µ–∑–ø–µ–∫–∞ —Ç–∞ –¥–æ—Å—Ç—É–ø

### –Ø–∫ –Ω–∞–¥–∞—Ç–∏ –∞–¥–º—ñ–Ω –ø—Ä–∞–≤–∞?

**–ú–µ—Ç–æ–¥ 1: –ß–µ—Ä–µ–∑ –±–∞–∑—É –¥–∞–Ω–∏—Ö (SQL)**
```sql
-- –ó—Ä–æ–±–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
UPDATE users SET is_admin = TRUE WHERE user_id = 1;

-- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å–ø–∏—Å–æ–∫ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤
SELECT user_id, first_name, last_name, email, is_admin 
FROM users 
WHERE is_admin = TRUE;
```

**–ú–µ—Ç–æ–¥ 2: –ú—ñ–≥—Ä–∞—Ü—ñ—è (–≤–∂–µ –≤–∫–ª—é—á–µ–Ω–∞)**
```bash
# –ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—é
psql -U your_user -d your_database -f database/migrations/20251124_add_admin_role.sql
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø—É

–í—Å—ñ –∞–¥–º—ñ–Ω —Ä–æ—É—Ç–∏ –∑–∞—Ö–∏—â–µ–Ω—ñ:

```typescript
async function checkAdmin(userId: number) {
  const user = await prisma.user.findUnique({
    where: { id: userId },
    select: { isAdmin: true }
  });
  
  if (!user?.isAdmin) {
    throw new Error('–î–æ—Å—Ç—É–ø –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ. –¢—ñ–ª—å–∫–∏ –¥–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤.');
  }
  
  return true;
}
```

**–í—ñ–¥–ø–æ–≤—ñ–¥—ñ –ø—Ä–∏ —Å–ø—Ä–æ–±—ñ –¥–æ—Å—Ç—É–ø—É:**
- ‚úÖ –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä - –¥–æ—Å—Ç—É–ø –¥–æ–∑–≤–æ–ª–µ–Ω–æ
- ‚ùå –ó–≤–∏—á–∞–π–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á - —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –≥–æ–ª–æ–≤–Ω—É + 403 –ø–æ–º–∏–ª–∫–∞
- ‚ùå –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π - —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /login

---

## üì° API Endpoints

### 1. –ó–∞–≥–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```
GET /api/admin/stats
```

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "success": true,
  "stats": {
    "users": {
      "total": 1250,
      "active": 450,
      "recent": [...]
    },
    "services": {
      "total": 3420
    },
    "messages": {
      "total": 15670
    },
    "ucm": {
      "totalTransactions": 8930,
      "totalInCirculation": 125000.50,
      "topUsers": [...],
      "byType": [...]
    }
  }
}
```

---

### 2. –°–ø–∏—Å–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
```
GET /api/admin/users?page=1&limit=20&search=—ñ–≤–∞–Ω&sortBy=balanceUcm&order=desc
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- `page` - –Ω–æ–º–µ—Ä —Å—Ç–æ—Ä—ñ–Ω–∫–∏ (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: 1)
- `limit` - –∫—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: 20)
- `search` - –ø–æ—à—É–∫ –ø–æ —ñ–º–µ–Ω—ñ/email/–º—ñ—Å—Ç—É
- `sortBy` - —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è (createdAt, balanceUcm, firstName, city)
- `order` - –ø–æ—Ä—è–¥–æ–∫ (asc, desc)

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "success": true,
  "users": [
    {
      "id": 123,
      "firstName": "–Ü–≤–∞–Ω",
      "lastName": "–ü–µ—Ç—Ä–µ–Ω–∫–æ",
      "email": "ivan@example.com",
      "phone": "+380501234567",
      "city": "–ö–∏—ó–≤",
      "balanceUcm": 150.50,
      "isAdmin": false,
      "isVerified": true,
      "createdAt": "2025-01-15T10:30:00Z",
      "stats": {
        "servicesCount": 5,
        "messagesSent": 234,
        "transactionsCount": 45,
        "ucmSent": 500,
        "ucmReceived": 650.50,
        "recentTransactions": [...]
      }
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 20,
    "total": 1250,
    "totalPages": 63
  }
}
```

---

### 3. –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó
```
GET /api/admin/transactions?page=1&limit=50&type=transfer_sent
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- `page` - –Ω–æ–º–µ—Ä —Å—Ç–æ—Ä—ñ–Ω–∫–∏
- `limit` - –∫—ñ–ª—å–∫—ñ—Å—Ç—å (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: 50)
- `type` - —Ñ—ñ–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É (all, transfer_sent, transfer_received, admin_grant, etc.)
- `userId` - —Ñ—ñ–ª—å—Ç—Ä –ø–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "success": true,
  "transactions": [...],
  "stats": {
    "byType": [...],
    "byPeriod": {
      "today": 45,
      "week": 320,
      "month": 1450
    },
    "biggestTransfers": [...]
  },
  "pagination": {...}
}
```

---

### 4. –ü–µ—Ä–µ–ø–∏—Å–∫–∏
```
GET /api/admin/conversations?limit=50
```

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "success": true,
  "stats": {
    "totalMessages": 15670,
    "messagesLast24h": 450,
    "messagesLast7d": 3200,
    "totalConversations": 50,
    "topChatters": [...]
  },
  "conversations": [
    {
      "id": 1,
      "participants": [...],
      "messagesCount": 234,
      "createdAt": "...",
      "lastActivity": "..."
    }
  ]
}
```

---

## üé® UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

### –°—Ç–∞—Ç–∏—Å—Ç–∏—á–Ω—ñ –∫–∞—Ä—Ç–∫–∏
```tsx
<div className="bg-white rounded-2xl shadow-lg p-6 border-2 hover:border-blue-500">
  <div className="p-3 bg-blue-100 rounded-xl">
    <Users className="w-6 h-6 text-blue-600" />
  </div>
  <div className="text-3xl font-bold text-neutral-900">1,250</div>
  <div className="text-sm text-neutral-600">–ê–∫—Ç–∏–≤–Ω–∏—Ö: 450</div>
</div>
```

### –¢–∞–±–∏ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó
- –û–≥–ª—è–¥ (Overview)
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ (Users)
- –ü–µ—Ä–µ–ø–∏—Å–∫–∏ (Messages)
- –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó (Transactions)

### –ö–æ–ª—å–æ—Ä–∏ –¥–ª—è —Ç–∏–ø—ñ–≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π
- `transfer_sent` - —á–µ—Ä–≤–æ–Ω–∏–π
- `transfer_received` - –∑–µ–ª–µ–Ω–∏–π
- `admin_grant` - —Å–∏–Ω—ñ–π
- `registration_bonus` - —Ñ—ñ–æ–ª–µ—Ç–æ–≤–∏–π
- `service_payment` - –∂–æ–≤—Ç–∏–π

---

## üìä –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞

### –©–æ –º–æ–∂–Ω–∞ –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏?

**–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ:**
- ‚úÖ –•—Ç–æ –∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞–≤—Å—è (–Ω–æ–≤—ñ –∑–∞ 7 –¥–Ω—ñ–≤)
- ‚úÖ –•—Ç–æ –∞–∫—Ç–∏–≤–Ω–∏–π (–æ—Å—Ç–∞–Ω–Ω—ñ–π –≤—Ö—ñ–¥)
- ‚úÖ –°–∫—ñ–ª—å–∫–∏ –ø–æ—Å–ª—É–≥ —Å—Ç–≤–æ—Ä–∏–≤
- ‚úÖ –°–∫—ñ–ª—å–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –≤—ñ–¥–ø—Ä–∞–≤–∏–≤
- ‚úÖ –§—ñ–Ω–∞–Ω—Å–æ–≤–∞ –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å (–≤—ñ–¥–ø—Ä–∞–≤–∏–≤/–æ—Ç—Ä–∏–º–∞–≤ –£–¶–ú)

**–¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó:**
- ‚úÖ –•—Ç–æ –∫–æ–º—É —Å–∫–∏–Ω—É–≤ –≥—Ä–æ—à—ñ
- ‚úÖ –°–∫—ñ–ª—å–∫–∏ –≤—Å—å–æ–≥–æ –≤ –æ–±—ñ–≥—É
- ‚úÖ –ù–∞–π–±—ñ–ª—å—à—ñ –ø–µ—Ä–µ–∫–∞–∑–∏
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–ø–∞—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π
- ‚úÖ –î–∏–Ω–∞–º—ñ–∫–∞ (–¥–µ–Ω—å/—Ç–∏–∂–¥–µ–Ω—å/–º—ñ—Å—è—Ü—å)

**–ü–µ—Ä–µ–ø–∏—Å–∫–∏:**
- ‚úÖ –•—Ç–æ –∑ –∫–∏–º –ø–µ—Ä–µ–ø–∏—Å—É—î—Ç—å—Å—è
- ‚úÖ –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- ‚úÖ –¢–æ–ø –∞–∫—Ç–∏–≤–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- ‚úÖ –û—Å—Ç–∞–Ω–Ω—ñ –±–µ—Å—ñ–¥–∏

**–ü–æ—Å–ª—É–≥–∏:**
- ‚úÖ –°–∫—ñ–ª—å–∫–∏ –≤—Å—å–æ–≥–æ —Å—Ç–≤–æ—Ä–µ–Ω–æ
- ‚úÖ –•—Ç–æ —â–æ —Å—Ç–≤–æ—Ä–∏–≤ (–≤ –ø—Ä–æ—Ñ—ñ–ª—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞)

---

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—é
```bash
# PostgreSQL
psql -U your_user -d platform_svoi -f database/migrations/20251124_add_admin_role.sql

# –ê–±–æ —á–µ—Ä–µ–∑ Prisma
npx prisma db push
```

### –ó—Ä–æ–±–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
```sql
UPDATE users SET is_admin = TRUE WHERE email = 'admin@example.com';
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤
```sql
SELECT user_id, first_name, last_name, email, is_admin 
FROM users 
WHERE is_admin = TRUE;
```

---

## üö¶ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### 1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –¥–æ—Å—Ç—É–ø
- –°–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–π—Ç–∏ –Ω–∞ `/admin` –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /login
- –°–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–π—Ç–∏ —è–∫ –∑–≤–∏—á–∞–π–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –≥–æ–ª–æ–≤–Ω—É
- –ó–∞–π–¥—ñ—Ç—å —è–∫ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä ‚Üí —É—Å–ø—ñ—Ö ‚úÖ

### 2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ API
```bash
# –ó–∞–≥–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
curl -X GET http://localhost:3000/api/admin/stats \
  -H "Cookie: auth-token=YOUR_TOKEN"

# –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ
curl -X GET "http://localhost:3000/api/admin/users?page=1&limit=20" \
  -H "Cookie: auth-token=YOUR_TOKEN"

# –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó
curl -X GET "http://localhost:3000/api/admin/transactions?page=1" \
  -H "Cookie: auth-token=YOUR_TOKEN"
```

---

## üìù TODO (–ú–∞–π–±—É—Ç–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è)

- [ ] –ì—Ä–∞—Ñ—ñ–∫–∏ —Ç–∞ —á–∞—Ä—Ç–∏ (charts.js –∞–±–æ recharts)
- [ ] –ï–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ CSV/Excel
- [ ] –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- [ ] –ë–ª–æ–∫—É–≤–∞–Ω–Ω—è/—Ä–æ–∑–±–ª–æ–∫—É–≤–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- [ ] Email —Ä–æ–∑—Å–∏–ª–∫–∏ –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- [ ] –õ–æ–≥–∏ –¥—ñ–π –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤
- [ ] –î–µ—Ç–∞–ª—å–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –∫–æ–∂–Ω–æ—ó –ø–µ—Ä–µ–ø–∏—Å–∫–∏
- [ ] –§—ñ–ª—å—Ç—Ä–∏ –ø–æ –¥–∞—Ç–∞—Ö –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π
- [ ] –ó–≤—ñ—Ç–∏ –∑–∞ –ø–µ—Ä—ñ–æ–¥

---

## üìÑ –§–∞–π–ª–∏ –ø—Ä–æ—î–∫—Ç—É

```
src/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ admin/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx                    # –ì–æ–ª–æ–≤–Ω–∞ –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx               # –°–ø–∏—Å–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ transactions/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ page.tsx               # –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó
‚îÇ   ‚îî‚îÄ‚îÄ api/
‚îÇ       ‚îî‚îÄ‚îÄ admin/
‚îÇ           ‚îú‚îÄ‚îÄ stats/route.ts         # API –∑–∞–≥–∞–ª—å–Ω–æ—ó —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
‚îÇ           ‚îú‚îÄ‚îÄ users/route.ts         # API –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
‚îÇ           ‚îú‚îÄ‚îÄ transactions/route.ts  # API —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π
‚îÇ           ‚îî‚îÄ‚îÄ conversations/route.ts # API –ø–µ—Ä–µ–ø–∏—Å–æ–∫

database/
‚îî‚îÄ‚îÄ migrations/
    ‚îî‚îÄ‚îÄ 20251124_add_admin_role.sql    # –ú—ñ–≥—Ä–∞—Ü—ñ—è –¥–ª—è isAdmin

prisma/
‚îî‚îÄ‚îÄ schema.prisma                      # –î–æ–¥–∞–Ω–æ isAdmin –ø–æ–ª–µ
```

---

**–ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä —É –≤–∞—Å —î –ø–æ–≤–Ω–æ—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∞ –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å! üéâ**

–î–ª—è –ø–æ—á–∞—Ç–∫—É —Ä–æ–±–æ—Ç–∏:
1. –ó–∞—Å—Ç–æ—Å—É–π—Ç–µ –º—ñ–≥—Ä–∞—Ü—ñ—é
2. –ó—Ä–æ–±—ñ—Ç—å —Å–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
3. –ó–∞–π–¥—ñ—Ç—å –Ω–∞ `/admin`
4. –ê–Ω–∞–ª—ñ–∑—É–π—Ç–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É!
