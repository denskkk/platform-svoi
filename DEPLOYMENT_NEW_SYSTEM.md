# üöÄ –Ü–ù–°–¢–†–£–ö–¶–Ü–á –ó –†–û–ó–ì–û–†–¢–ê–ù–ù–Ø –ù–û–í–û–á –°–ò–°–¢–ï–ú–ò –†–ï–Ñ–°–¢–†–ê–¶–Ü–á

## üìã –ó–º—ñ—Å—Ç
1. [–©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—å](#—â–æ-–∑–º—ñ–Ω–∏–ª–æ—Å—å)
2. [–ö—Ä–æ–∫–∏ –¥–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è](#–∫—Ä–æ–∫–∏-–¥–ª—è-—Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è)
3. [–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è](#—Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è)
4. [–í—ñ–¥–∫–∞—Ç –∑–º—ñ–Ω](#–≤—ñ–¥–∫–∞—Ç-–∑–º—ñ–Ω)

---

## üéØ –©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—å

### –¢–∏–ø–∏ –∞–∫–∞—É–Ω—Ç—ñ–≤ (–±—É–ª–æ ‚Üí —Å—Ç–∞–ª–æ)
- ‚ùå `guest` ‚Üí ‚úÖ `viewer` (–ì–ª—è–¥–∞—á - —Ç—ñ–ª—å–∫–∏ –ø–µ—Ä–µ–≥–ª—è–¥)
- ‚ùå `basic` ‚Üí ‚úÖ `basic` (–ó–≤–∏—á–∞–π–Ω–∏–π - –ø–æ–≤–Ω–∞ –∞–Ω–∫–µ—Ç–∞, –ø–ª–∞—Ç–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó)
- ‚ùå `extended` ‚Üí ‚úÖ `basic` (–æ–±'—î–¥–Ω–∞–Ω–æ)
- ‚ùå `business` ‚Üí ‚úÖ `business` (–ë—ñ–∑–Ω–µ—Å - –ø–æ–≤–Ω–∞ –∞–Ω–∫–µ—Ç–∞, –ø–ª–∞—Ç–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó)
- ‚ùå `business_premium` ‚Üí ‚úÖ `business` (–æ–±'—î–¥–Ω–∞–Ω–æ)

### –ù–æ–≤–∞ –º–æ–¥–µ–ª—å –º–æ–Ω–µ—Ç–∏–∑–∞—Ü—ñ—ó
**–†–ê–ù–Ü–®–ï:** –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –ø–ª–∞—Ç–∏–ª–∏ –∑–∞ —Ç–∏–ø –∞–∫–∞—É–Ω—Ç—É (–ø—ñ–¥–ø–∏—Å–∫–∞)
**–ó–ê–†–ê–ó:** –ê–Ω–∫–µ—Ç–∏ –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω—ñ, –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –ø–ª–∞—Ç—è—Ç—å –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –¥—ñ—ó:

| –î—ñ—è | –¶—ñ–Ω–∞ |
|-----|------|
| ü§ù –ü–æ—à—É–∫ –ø–∞—Ä–∏/–ø–∞—Ä—Ç–Ω–µ—Ä–∞ | 5 —É—Ü–º–æ–∫ |
| üíº –ó–∞—è–≤–∫–∞ –Ω–∞ –ø–æ—à—É–∫ —Ä–æ–±–æ—Ç–∏ | 3 —É—Ü–º–∫–∏ |
| üõ†Ô∏è –ó–∞—è–≤–∫–∞ –Ω–∞ –ø–æ—Å–ª—É–≥—É | 3 —É—Ü–º–∫–∏ |
| üë• –ü–æ—à—É–∫ –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫–∞ | 4 —É—Ü–º–∫–∏ |
| üí∞ –ü–æ—à—É–∫ —ñ–Ω–≤–µ—Å—Ç–æ—Ä–∞ | 5 —É—Ü–º–æ–∫ |
| üîç –†–æ–∑—à–∏—Ä–µ–Ω–∏–π –ø–æ—à—É–∫ | 2 —É—Ü–º–∫–∏ |

### –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞ —Å–∏—Å—Ç–µ–º–∞
- **–¢–æ–π —Ö—Ç–æ –∑–∞–ø—Ä–æ—Å–∏–≤:** +1 —É—Ü–º–∫–∞
- **–ù–æ–≤–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á:** +1 —É—Ü–º–∫–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –Ω–∞—Ä–∞—Ö—É–≤–∞–Ω–Ω—è –ø—Ä–∏ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó
- –°—Ç–æ—Ä—ñ–Ω–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏: `/referrals`

---

## üîß –ö—Ä–æ–∫–∏ –¥–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

### 1Ô∏è‚É£ Backup –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
```bash
# –ù–∞ VPS –ø—ñ–¥–∫–ª—é—á—ñ—Ç—å—Å—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞
ssh user@your-vps-ip

# –°—Ç–≤–æ—Ä—ñ—Ç—å backup
pg_dump -U postgres -d platform_svoi > backup_before_migration_$(date +%Y%m%d_%H%M%S).sql
```

### 2Ô∏è‚É£ –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–¥—É
```bash
# –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –ø—Ä–æ–µ–∫—Ç—É
cd ~/platform-svoi

# –ó–±–µ—Ä–µ–∂—ñ—Ç—å –ª–æ–∫–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–∏ (—è–∫—â–æ —î)
git stash

# –û—Ç—Ä–∏–º–∞–π—Ç–µ –æ—Å—Ç–∞–Ω–Ω—ñ –∑–º—ñ–Ω–∏
git pull origin main

# –ü–æ–≤–µ—Ä–Ω—ñ—Ç—å –ª–æ–∫–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–∏ (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
git stash pop
```

### 3Ô∏è‚É£ –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
```bash
# –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –Ω–æ–≤—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
npm install

# –ó–≥–µ–Ω–µ—Ä—É–π—Ç–µ Prisma Client
npx prisma generate
```

### 4Ô∏è‚É£ –ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –º—ñ–≥—Ä–∞—Ü—ñ—ó –ë–î
```bash
# –ó–∞–ø—É—Å—Ç—ñ—Ç—å –º—ñ–≥—Ä–∞—Ü—ñ—é
psql -U postgres -d platform_svoi -f database/migrations/20251118_new_registration_system.sql

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
psql -U postgres -d platform_svoi -c "SELECT account_type, COUNT(*) FROM users GROUP BY account_type;"
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
 account_type | count 
--------------+-------
 viewer       |   X
 basic        |   Y
 business     |   Z
```

### 5Ô∏è‚É£ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –¥–æ–¥–∞—Ç–∫—É
```bash
# –Ø–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ PM2
pm2 restart platform-svoi

# –ê–±–æ —á–µ—Ä–µ–∑ systemd
sudo systemctl restart platform-svoi

# –ê–±–æ —á–µ—Ä–µ–∑ docker
docker-compose restart

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–≤
pm2 logs platform-svoi
# –∞–±–æ
tail -f /var/log/platform-svoi/error.log
```

### 6Ô∏è‚É£ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–±–æ—Ç–∏
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∑–¥–æ—Ä–æ–≤'—è API
curl http://localhost:3000/api/health

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø–ª–∞—Ç–Ω—ñ –¥—ñ—ó
curl http://localhost:3000/api/paid-actions/info
```

---

## ‚úÖ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### 1. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó
- [ ] –í—ñ–¥–∫—Ä–∏–π—Ç–µ `/auth/register`
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –¥–æ—Å—Ç—É–ø–Ω—ñ —Ç—ñ–ª—å–∫–∏ 3 —Ç–∏–ø–∏: –ì–ª—è–¥–∞—á, –ó–≤–∏—á–∞–π–Ω–∏–π, –ë—ñ–∑–Ω–µ—Å
- [ ] –ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∫–æ–∂–Ω–æ–≥–æ —Ç–∏–ø—É
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –æ—Ç—Ä–∏–º–∞–≤ –ø–æ—á–∞—Ç–∫–æ–≤–∏–π –±–∞–ª–∞–Ω—Å

### 2. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏
- [ ] –í—ñ–¥–∫—Ä–∏–π—Ç–µ `/referrals`
- [ ] –°–∫–æ–ø—ñ—é–π—Ç–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è
- [ ] –ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –æ–±–∏–¥–≤–∞ –æ—Ç—Ä–∏–º–∞–ª–∏ –ø–æ 1 —É—Ü–º—Ü—ñ

### 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–ª–∞—Ç–Ω–∏—Ö –¥—ñ–π
- [ ] –°–ø—Ä–æ–±—É–π—Ç–µ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞—è–≤–∫—É –Ω–∞ –ø–æ—à—É–∫ –ø–∞—Ä—Ç–Ω–µ—Ä–∞
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å–ø–∏—Å–∞–Ω–Ω—è —É—Ü–º–æ–∫
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è –∑–±–µ—Ä–µ–∂–µ–Ω–∞
- [ ] –°–ø—Ä–æ–±—É–π—Ç–µ –≤–∏–∫–æ–Ω–∞—Ç–∏ –¥—ñ—é –∑ –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—ñ–º –±–∞–ª–∞–Ω—Å–æ–º

### 4. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ—Å–Ω—É—é—á–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- [ ] –£–≤—ñ–π–¥—ñ—Ç—å –ø—ñ–¥ —ñ—Å–Ω—É—é—á–∏–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ —Ç–∏–ø –∞–∫–∞—É–Ω—Ç—É –ø—Ä–∞–≤–∏–ª—å–Ω–æ –º—ñ–≥—Ä—É–≤–∞–≤
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –ø—Ä–æ—Ñ—ñ–ª—å –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è –∫–æ—Ä–µ–∫—Ç–Ω–æ

---

## üîÑ –í—ñ–¥–∫–∞—Ç –∑–º—ñ–Ω (—è–∫—â–æ —â–æ—Å—å –ø—ñ—à–ª–æ –Ω–µ —Ç–∞–∫)

### –®–≤–∏–¥–∫–∏–π –≤—ñ–¥–∫–∞—Ç
```bash
# 1. –ó—É–ø–∏–Ω—ñ—Ç—å –¥–æ–¥–∞—Ç–æ–∫
pm2 stop platform-svoi

# 2. –í—ñ–¥–Ω–æ–≤—ñ—Ç—å backup
psql -U postgres -d platform_svoi < backup_before_migration_YYYYMMDD_HHMMSS.sql

# 3. –ü–æ–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ—ó –≤–µ—Ä—Å—ñ—ó –∫–æ–¥—É
cd ~/platform-svoi
git log --oneline -10  # –∑–Ω–∞–π–¥—ñ—Ç—å –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –∫–æ–º—ñ—Ç
git reset --hard <previous-commit-hash>

# 4. –ü–µ—Ä–µ–≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
npm install
npx prisma generate

# 5. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –¥–æ–¥–∞—Ç–æ–∫
pm2 start platform-svoi
```

---

## üìä –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –ø—ñ—Å–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

### –ü–µ—Ä—à—ñ 24 –≥–æ–¥–∏–Ω–∏
```bash
# –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –ø–æ–º–∏–ª–æ–∫
pm2 logs platform-svoi --err

# –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤
pm2 monit

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –Ω–æ–≤–∏—Ö —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ–π
psql -U postgres -d platform_svoi -c "SELECT account_type, COUNT(*) FROM users WHERE created_at > NOW() - INTERVAL '24 hours' GROUP BY account_type;"

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–ª–∞—Ç–Ω–∏—Ö –¥—ñ–π
psql -U postgres -d platform_svoi -c "SELECT action_type, COUNT(*), SUM(amount) FROM paid_actions WHERE created_at > NOW() - INTERVAL '24 hours' GROUP BY action_type;"
```

---

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º–∏:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏: `pm2 logs platform-svoi`
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞—Ç—É—Å –ë–î: `sudo systemctl status postgresql`
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∑'—î–¥–Ω–∞–Ω–Ω—è: `psql -U postgres -d platform_svoi -c "SELECT 1;"`

---

## üéâ –£—Å–ø—ñ—à–Ω–µ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

–ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è:
- ‚úÖ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –º–æ–∂—É—Ç—å —Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è –∑ 3 —Ç–∏–ø–∞–º–∏ –∞–∫–∞—É–Ω—Ç—ñ–≤
- ‚úÖ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î
- ‚úÖ –ü–ª–∞—Ç–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –¥–æ—Å—Ç—É–ø–Ω—ñ
- ‚úÖ –ë–∞–ª–∞–Ω—Å —É—Ü–º–æ–∫ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –°—Ç–æ—Ä—ñ–Ω–∫–∞ `/referrals` –ø—Ä–∞—Ü—é—î
- ‚úÖ API endpoints –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—é—Ç—å

**–í—ñ—Ç–∞—î–º–æ! –ù–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞ —É—Å–ø—ñ—à–Ω–æ —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–∞! üöÄ**
